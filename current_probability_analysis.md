# 現在の確率設定 - 詳細分析

**分析日時:** 2025年12月11日  
**設定ファイル:** data/config.json

## 📊 基本設定

| 項目 | 値 |
|------|-----|
| リール数 | 3 |
| 期待値（5回スピン） | **50.0点** ⚠️ |
| ミスフラグ確率 | **20.0%** |

## 🎰 シンボル別の確率と配当

### 通常シンボル（配当あり）

| シンボル | 表示 | 配当 | 確率 | 備考 |
|---------|------|------|------|------|
| GOD | GOD | **300点** | 0.192% | 最高配当 |
| seven | ７ | **100点** | 3.347% | 高配当 |
| bar | BAR | **50点** | 6.837% | 中配当 |
| bell | 🔔 | **20点** | 10.496% | 中配当 |
| grape | 🍇 | **12点** | 11.766% | 低配当 |
| cherry | 🍒 | **8点** | 12.458% | 低配当 |
| lemon | 🍋 | **5点** | 13.004% | 低配当 |

**通常シンボル合計確率:** 58.10%

### リーチハズレシンボル（配当なし）

| シンボル | 表示 | 配当 | 確率 | 用途 |
|---------|------|------|------|------|
| god_reach | GOD | **0点** | 13.967% | GODリーチミス演出 |
| seven_reach | ７ | **0点** | 13.967% | セブンリーチミス演出 |
| bar_reach | BAR | **0点** | 13.967% | BARリーチミス演出 |

**リーチハズレシンボル合計確率:** 41.90%

## 🎲 ゲームロジック

### 1. ミスフラグ（20%の確率）

- 最初の2リールが**必ず異なる**シンボルになる
- 3つ目のリールはランダム
- **結果**: 必ずハズレ（0点）

### 2. 通常フラグ（80%の確率）

3つのリールを通常通り選択:

#### パターンA: 3つ揃い（配当あり）
- 同じ通常シンボルが3つ揃う
- 配当が発生

#### パターンB: リーチミス
- リール1とリール2が同じリーチハズレシンボル
- リール3が異なる
- リーチ音が鳴る
- **配当: 0点**

#### パターンC: ハズレ
- 上記以外
- **配当: 0点**

## 🔍 問題点の分析

### 問題1: 期待値が極端に低い

設定: `expected_total_5: 50.0`

これは5回スピンで平均50点を目指す設定ですが、**実際のシミュレーション結果は0.35点**でした。

**原因:**
- リーチハズレシンボルの確率が高すぎる（各13.967%、合計41.90%）
- ミスフラグが20%
- 高配当シンボルの確率が低すぎる

### 問題2: 3つ揃いの確率が極めて低い

各シンボルが3つ揃う確率（理論値）:

| シンボル | 1リール確率 | 3リール確率 | 期待値 |
|---------|------------|------------|--------|
| GOD | 0.192% | 0.000007% | 0.000021点 |
| seven | 3.347% | 0.00375% | 0.00375点 |
| bar | 6.837% | 0.0320% | 0.016点 |
| bell | 10.496% | 0.116% | 0.023点 |
| grape | 11.766% | 0.163% | 0.020点 |
| cherry | 12.458% | 0.194% | 0.016点 |
| lemon | 13.004% | 0.220% | 0.011点 |

**合計期待値（1スピン）:** 約0.09点  
**5スピンの期待値:** 約0.45点

これは設定された50点の**0.9%**しかありません。

### 問題3: リーチハズレシンボルの影響

リーチハズレシンボルは:
- 配当が0点
- 確率が高い（各13.967%）
- リーチ演出のために存在

しかし、確率が高すぎるため、ほとんどのスピンでリーチハズレシンボルが選ばれ、配当が発生しません。

## 📈 シミュレーション結果との比較

### 1,000,000回シミュレーションの結果

| 景品 | 発生回数 | 確率 |
|------|---------|------|
| 5等 (0-49点) | 998,569回 | 99.857% |
| 4等 (50-149点) | 1,430回 | 0.143% |
| 3等 (150-199点) | 1回 | 0.000% |
| 2等以上 | 0回 | 0.000% |

**平均点数:** 0.35点

## 🎯 推奨される設定

### オプション1: 元の設定に戻す（推奨）

```json
{
  "expected_total_5": 2500.0,
  "miss_probability": 0.0
}
```

これにより:
- 特賞: 約0.1%
- 1等: 約1%
- 2等: 約2.5%
- 3等: 約6%
- 4等: 約18%
- 5等: 約72%

### オプション2: 中程度の設定

```json
{
  "expected_total_5": 500.0,
  "miss_probability": 10.0
}
```

これにより:
- より多くのユーザーが中位の景品を獲得
- 特賞は非常に稀

### オプション3: カスタム設定

ビジネス要件に応じて調整:
1. 景品コストの予算
2. 目標とする景品分布
3. ユーザー体験の目標

## 🔧 修正方法

### 方法1: 管理画面から修正

1. https://5000-i3gjrskfqpsj8g9tekp41-2228fcf2.manus-asia.computer/admin にアクセス
2. 「設定」→「スロット設定」
3. 「5回合計の期待値」を2500に変更
4. 「確率を再計算」をクリック
5. 保存

### 方法2: config.jsonを直接編集

```bash
# data/config.jsonを編集
"expected_total_5": 2500.0
```

その後、管理画面で確率を再計算。

## 📝 まとめ

**現在の設定の問題:**
- 期待値が50点と極端に低い
- 99.9%のユーザーが最低ランクの景品しか獲得できない
- ゲームとしての面白みがない
- ユーザー体験が非常に悪い

**推奨アクション:**
1. `expected_total_5`を2500.0に変更
2. 確率を再計算
3. 再度シミュレーションを実行して確認
4. 本番環境に反映

**緊急度:** 🔴 高（即座に対応が必要）
