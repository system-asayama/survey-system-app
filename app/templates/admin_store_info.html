{% extends "base.html" %}
{% block title %}店舗情報{% endblock %}
{% block content %}
<h1>店舗情報</h1>

<div class="card">
  <h2>テナント情報</h2>
  <table class="table">
    <tbody>
      <tr>
        <th style="width:200px">テナントID</th>
        <td>{{ tenant.id }}</td>
      </tr>
      <tr>
        <th>名称</th>
        <td>{{ tenant['名称'] }}</td>
      </tr>
      <tr>
        <th>Slug</th>
        <td>{{ tenant.slug }}</td>
      </tr>
      <tr>
        <th>作成日時</th>
        <td>{{ tenant.created_at }}</td>
      </tr>
    </tbody>
  </table>
</div>

<div class="card" style="margin-top:20px">
  <h2>店舗一覧</h2>
  
  {% if stores %}
    <table style="width:100%;border-collapse:collapse;font-size:0.85em">
      <thead>
        <tr style="background:#f5f5f5;border-bottom:2px solid #ddd">
          <th style="padding:8px;text-align:left;white-space:nowrap">店舗ID</th>
          <th style="padding:8px;text-align:left;white-space:nowrap">名称</th>
          <th style="padding:8px;text-align:left;white-space:nowrap">Slug</th>
          <th style="padding:8px;text-align:left;white-space:nowrap">作成日時</th>
          <th style="padding:8px;text-align:left;white-space:nowrap">操作</th>
        </tr>
      </thead>
      <tbody>
        {% for store in stores %}
        <tr style="border-bottom:1px solid #eee">
          <td style="padding:8px;white-space:nowrap">{{ store.id }}</td>
          <td style="padding:8px;white-space:nowrap"><strong>{{ store['名称'] }}</strong></td>
          <td style="padding:8px;white-space:nowrap"><code>{{ store.slug }}</code></td>
          <td style="padding:8px;white-space:nowrap;color:#666">{{ store.created_at }}</td>
          <td style="padding:8px;white-space:nowrap">
            <a class="btn small" href="{{ url_for('admin.store_edit', store_id=store.id) }}" style="font-size:0.9em;padding:4px 8px">編集</a>
            <a class="btn small" href="{{ url_for('admin.store_apps', store_id=store.id) }}" style="font-size:0.9em;padding:4px 8px">アプリ管理</a>
            {% if session.get('role') in ['system_admin', 'tenant_admin'] %}
            <form method="post" action="{{ url_for('admin.store_delete', store_id=store.id) }}" style="display:inline" onsubmit="return confirm('本当に削除しますか？');">
              <button class="btn small" type="submit" style="background:#d32f2f;font-size:0.9em;padding:4px 8px">削除</button>
            </form>
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p style="color:#666">店舗が登録されていません。</p>
  {% endif %}
</div>

<div style="margin-top:20px">
  <a class="btn sub" href="{{ url_for('admin.dashboard') }}">戻る</a>
</div>
{% endblock %}
